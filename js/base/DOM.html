<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 基础之DOM操作 | 前端小册</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon">
    <meta name="description" content="前端进阶指南">
    <meta name="keywords" content="html，css，javascript，js，vue，react，webpack，web，前端，面试">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.1b8b8298.css" as="style"><link rel="preload" href="/assets/js/app.cccdeae1.js" as="script"><link rel="preload" href="/assets/js/12.4923b265.js" as="script"><link rel="preload" href="/assets/js/2.87a009b8.js" as="script"><link rel="preload" href="/assets/js/51.df0107c7.js" as="script"><link rel="preload" href="/assets/js/13.8e94c197.js" as="script"><link rel="prefetch" href="/assets/js/10.146cd9e6.js"><link rel="prefetch" href="/assets/js/11.bfdddaca.js"><link rel="prefetch" href="/assets/js/14.12feb841.js"><link rel="prefetch" href="/assets/js/15.b6bd40a5.js"><link rel="prefetch" href="/assets/js/16.a2bbc80e.js"><link rel="prefetch" href="/assets/js/17.3a177b3f.js"><link rel="prefetch" href="/assets/js/18.0582d1f9.js"><link rel="prefetch" href="/assets/js/19.608856e6.js"><link rel="prefetch" href="/assets/js/20.c313e74f.js"><link rel="prefetch" href="/assets/js/21.871c362c.js"><link rel="prefetch" href="/assets/js/22.9aaea0c9.js"><link rel="prefetch" href="/assets/js/23.061e618b.js"><link rel="prefetch" href="/assets/js/24.ac71bec9.js"><link rel="prefetch" href="/assets/js/25.d5abc402.js"><link rel="prefetch" href="/assets/js/26.7905849a.js"><link rel="prefetch" href="/assets/js/27.d07ad309.js"><link rel="prefetch" href="/assets/js/28.b4978e68.js"><link rel="prefetch" href="/assets/js/29.c5ef0654.js"><link rel="prefetch" href="/assets/js/3.cb93f883.js"><link rel="prefetch" href="/assets/js/30.122bfd0a.js"><link rel="prefetch" href="/assets/js/31.bedd0723.js"><link rel="prefetch" href="/assets/js/32.c282ab74.js"><link rel="prefetch" href="/assets/js/33.e7fa3a3b.js"><link rel="prefetch" href="/assets/js/34.8c5c29df.js"><link rel="prefetch" href="/assets/js/35.d3670a74.js"><link rel="prefetch" href="/assets/js/36.e2ab34a6.js"><link rel="prefetch" href="/assets/js/37.71a933cb.js"><link rel="prefetch" href="/assets/js/38.aa0a7bf7.js"><link rel="prefetch" href="/assets/js/39.dd11bf3f.js"><link rel="prefetch" href="/assets/js/4.c3e0dff1.js"><link rel="prefetch" href="/assets/js/40.ea64909c.js"><link rel="prefetch" href="/assets/js/41.786148e5.js"><link rel="prefetch" href="/assets/js/42.e09f3ae3.js"><link rel="prefetch" href="/assets/js/43.98103e7d.js"><link rel="prefetch" href="/assets/js/44.39b74a0d.js"><link rel="prefetch" href="/assets/js/45.6274b1ca.js"><link rel="prefetch" href="/assets/js/46.0f5e6cc2.js"><link rel="prefetch" href="/assets/js/47.2f73078f.js"><link rel="prefetch" href="/assets/js/48.db7aec36.js"><link rel="prefetch" href="/assets/js/49.bcf7c1c2.js"><link rel="prefetch" href="/assets/js/5.9b5e916a.js"><link rel="prefetch" href="/assets/js/50.574fa383.js"><link rel="prefetch" href="/assets/js/52.88a93d49.js"><link rel="prefetch" href="/assets/js/53.139c1011.js"><link rel="prefetch" href="/assets/js/54.74b75bd3.js"><link rel="prefetch" href="/assets/js/55.f798e507.js"><link rel="prefetch" href="/assets/js/56.1316f04f.js"><link rel="prefetch" href="/assets/js/57.8e9790ad.js"><link rel="prefetch" href="/assets/js/58.99b91daa.js"><link rel="prefetch" href="/assets/js/59.0f1d6305.js"><link rel="prefetch" href="/assets/js/6.6ffca3c0.js"><link rel="prefetch" href="/assets/js/60.1d83cb2a.js"><link rel="prefetch" href="/assets/js/61.54c2ed4f.js"><link rel="prefetch" href="/assets/js/7.f68c636d.js"><link rel="prefetch" href="/assets/js/8.34aef290.js"><link rel="prefetch" href="/assets/js/9.a29789a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1b8b8298.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-513564f6><header class="navbar" data-v-513564f6><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端小册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue/" class="nav-link">
  Vue篇
</a></li><li class="dropdown-item"><!----> <a href="/frame/react/" class="nav-link">
  React篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/engineering/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/engineering/Babel/" class="nav-link">
  Babel
</a></li><li class="dropdown-item"><!----> <a href="/engineering/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/engineering/CodingStandard/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          技术社区
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/shenghui716/FE-Notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-513564f6></div> <aside class="sidebar" data-v-513564f6><nav class="nav-links"><div class="nav-item"><a href="/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/js/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue/" class="nav-link">
  Vue篇
</a></li><li class="dropdown-item"><!----> <a href="/frame/react/" class="nav-link">
  React篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/engineering/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/engineering/Babel/" class="nav-link">
  Babel
</a></li><li class="dropdown-item"><!----> <a href="/engineering/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/engineering/CodingStandard/" class="nav-link">
  代码规范
</a></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          技术社区
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  思否
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/shenghui716/FE-Notes/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS 基础篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/base/Variable.html" class="sidebar-link">JavaScript 基础之变量</a></li><li><a href="/js/base/DataType.html" class="sidebar-link">JavaScript 基础之数据类型</a></li><li><a href="/js/base/Operator.html" class="sidebar-link">JavaScript 基础之运算符</a></li><li><a href="/js/base/LogicalStructure.html" class="sidebar-link">JavaScript 基础之逻辑结构</a></li><li><a href="/js/base/Array.html" class="sidebar-link">JavaScript 基础之数组</a></li><li><a href="/js/base/Function.html" class="sidebar-link">JavaScript 基础之函数</a></li><li><a href="/js/base/Object.html" class="sidebar-link">JavaScript 基础之对象</a></li><li><a href="/js/base/ES6.html" class="sidebar-link">JavaScript 基础之ES6基础</a></li><li><a href="/js/base/Timer.html" class="sidebar-link">JavaScirpt 基础之定时器</a></li><li><a href="/js/base/Promise.html" class="sidebar-link">JavaScript 基础之 Promise</a></li><li><a href="/js/base/DOM.html" aria-current="page" class="active sidebar-link">JavaScript 基础之DOM操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#dom-概述" class="sidebar-link">DOM 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#什么是-dom" class="sidebar-link">什么是 DOM</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#dom-节点类型" class="sidebar-link">DOM 节点类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#domready" class="sidebar-link">DOMReady</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#什么是domready" class="sidebar-link">什么是domReady</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#浏览器渲染引擎的基本渲染流程" class="sidebar-link">浏览器渲染引擎的基本渲染流程</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#domready的实现策略" class="sidebar-link">domReady的实现策略</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#节点操作" class="sidebar-link">节点操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#创建节点" class="sidebar-link">创建节点</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#操作节点" class="sidebar-link">操作节点</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#查找节点" class="sidebar-link">查找节点</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#属性操作" class="sidebar-link">属性操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#element-attributes-属性" class="sidebar-link">Element.attributes 属性</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#属性操作的标准方法" class="sidebar-link">属性操作的标准方法</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#元素的标准属性" class="sidebar-link">元素的标准属性</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#自定义扩展属性" class="sidebar-link">自定义扩展属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#样式操作" class="sidebar-link">样式操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#html-元素的-style-属性" class="sidebar-link">HTML 元素的 style 属性</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#cssstyledeclaration-接口" class="sidebar-link">CSSStyleDeclaration 接口</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#window-getcomputedstyle" class="sidebar-link">window.getComputedStyle()</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#dom-常用对象" class="sidebar-link">DOM 常用对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/base/DOM.html#image-对象" class="sidebar-link">Image 对象</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#select-对象" class="sidebar-link">Select 对象</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#table-对象" class="sidebar-link">Table 对象</a></li><li class="sidebar-sub-header"><a href="/js/base/DOM.html#form-对象" class="sidebar-link">Form 对象</a></li></ul></li></ul></li><li><a href="/js/base/Event.html" class="sidebar-link">JavaScript 基础之事件</a></li><li><a href="/js/base/BOM.html" class="sidebar-link">JavaScript 基础之BOM</a></li><li><a href="/js/base/Storage.html" class="sidebar-link">JavaScirpt 基础之本地存储</a></li><li><a href="/js/base/RegExp.html" class="sidebar-link">JavaScript 基础之正则表达式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS 进阶篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page" data-v-513564f6> <div class="theme-default-content content__default"><h1 id="javascript-基础之dom操作"><a href="#javascript-基础之dom操作" class="header-anchor">#</a> JavaScript 基础之DOM操作</h1> <h2 id="dom-概述"><a href="#dom-概述" class="header-anchor">#</a> DOM 概述</h2> <h3 id="什么是-dom"><a href="#什么是-dom" class="header-anchor">#</a> 什么是 DOM</h3> <p>DOM 是 JavaScript 操作网页的接口，全称为“文档对象模型”（Document Object Model）。它的作用是将网页转为一个 JavaScript 对象，从而可以用脚本进行各种操作（比如增删内容）。</p> <p>浏览器会根据 DOM 模型，将结构化文档（比如 HTML 和 XML）解析成一系列的节点，每个节点都拥有各自的特点、数据和方法，也与其他节点存在某种关系。节点之间的关系构成了层次，而所有页面标记则表现为一个以特定节点为根节点的树形结构（DOM Tree）。</p> <p><img src="https://note.youdao.com/yws/api/personal/file/WEB5281260fefba224bbfad41f8dc144ebf?method=download&amp;shareKey=9ffad50e06982e972d7204cca8d9ef45" alt="HTML DOM 树"></p> <p>文档的第一层有两个节点，第一个是文档类型节点（<code>&lt;!doctype html&gt;</code>），第二个是 HTML 网页的顶层容器标签 <code>&lt;html&gt;</code>。后者构成了树结构的根节点（root node），其他 HTML 标签节点都是它的下级节点。</p> <p>除了根节点，其他节点都有三种层级关系。</p> <ul><li>父节点关系（parentNode）：直接的上级节点</li> <li>子节点关系（childNodes）：直接的下级节点</li> <li>同级节点关系（sibling）：拥有同一个父节点的节点</li></ul> <p>DOM 提供操作接口，用来获取这三种关系的节点。比如，子节点接口包括 <code>firstChild</code>（第一个子节点）和 <code>lastChild</code>（最后一个子节点）等属性，同级节点接口包括 <code>nextSibling</code>（紧邻在后的那个同级节点）和 <code>previousSibling</code>（紧邻在前的那个同级节点）属性。</p> <p>所有的节点和最终的树状结构，都有规范的对外接口。</p> <p>DOM 只是一个接口规范，可以用各种语言实现。所以严格地说，DOM 不是 JavaScript 语法的一部分，但是 DOM 操作是 JavaScript 最常见的任务，离开了 DOM，JavaScript 就无法控制网页。另一方面，JavaScript 也是最常用于 DOM 操作的语言。</p> <h3 id="dom-节点类型"><a href="#dom-节点类型" class="header-anchor">#</a> DOM 节点类型</h3> <p>DOM 的最小组成单位叫做节点（node）。节点分为 12 种不同类型，每种类型分别表示文档中不同的信息及标记。文档的树形结构（DOM 树），就是由各种不同类型的节点组成。</p> <p>这里介绍常用的 7 种节点类型。</p> <p>1、Element（元素节点）</p> <p>Element 节点对象对应网页的 HTML 元素，是组成文档树的重要部分。每一个 HTML 元素，在 DOM 树上都会转化成一个 Element 节点对象（以下简称元素节点），元素节点是唯一能够拥有属性的节点类型。</p> <p>不同的 HTML 元素对应的元素节点是不一样的，浏览器使用不同的构造函数，生成不同的元素节点。</p> <p>2、Attr（属性节点）</p> <p>Attr 节点对象代表了元素中的属性，因为属性实际上是附属于元素的，因此属性节点不能被看做是元素的子节点。因而在 DOM中 属性没有被认为是文档树的一部分。换句话说，属性节点其实被看做是包含它的元素节点的一部分，它并不作为单独的一个节点在文档树中出现。</p> <p>3、Text（文本节点）</p> <p>文本节点（Text）代表元素节点（Element）和属性节点（Attribute）的文本内容。如果一个节点只包含一段文本，那么它就有一个文本子节点，代表该节点的文本内容。由于空格也是一个字符，所以哪怕只有一个空格，也会形成文本节点。</p> <p>4、Comment（注释节点）</p> <p>注释节点（Comment）表示注释的内容。</p> <p>5、Document（文档节点）</p> <p>Document 节点对象代表整个文档，是文档树的根节点，它是文档中其他所有节点的父节点。每张网页都有自己的 document 对象，<code>window.document</code> 属性就指向这个对象。只要浏览器开始载入 HTML 文档，该对象就存在了，可以直接使用。</p> <p>6、DocumentType（文档类型节点）</p> <p>每一个 Document 都有一个 DocumentType 属性，它的值或者是 null，或者是 DocumentType 对象。比如声明文档类型时 <code>&lt;!doctype html&gt;</code> 就是文档类型节点。</p> <p>7、DocumentFragment（文档片段节点）</p> <p>DocumentFragment 节点代表一个文档的片段，本身就是一个完整的 DOM 树形结构。它没有父节点，<code>parentNode</code> 返回 <code>null</code>，但是可以插入任意数量的子节点。它不属于当前文档，操作 DocumentFragment 节点，要比直接操作 DOM 树快得多。</p> <h4 id="nodetype"><a href="#nodetype" class="header-anchor">#</a> nodeType</h4> <p>浏览器提供一个原生的节点对象 Node（低版本 IE 浏览器没有内置 Node 对象），每个节点都有一个 <code>nodeType</code> 属性，用于表明节点的类型。节点类型通过定义数值常量和字符常量两种方式来表示，IE 只支持数值常量。</p> <table><thead><tr><th>节点类型</th> <th style="text-align:center;">数值常量</th> <th>字符常量</th></tr></thead> <tbody><tr><td>Element（元素节点）</td> <td style="text-align:center;">1</td> <td>ELEMENT_NODE</td></tr> <tr><td>Attr（属性节点）</td> <td style="text-align:center;">2</td> <td>ATTRIBUTE_NODE</td></tr> <tr><td>Text（文本节点）</td> <td style="text-align:center;">3</td> <td>TEXT_NODE</td></tr> <tr><td>Comment（注释节点）</td> <td style="text-align:center;">8</td> <td>COMMENT_NODE</td></tr> <tr><td>Document（文档节点）</td> <td style="text-align:center;">9</td> <td>Document_NODE</td></tr> <tr><td>DocumentType（文档类型节点）</td> <td style="text-align:center;">10</td> <td>DOCUMENT_TYPE_NODE</td></tr> <tr><td>DocumentFragment（文档片段节点）</td> <td style="text-align:center;">11</td> <td>DOCUMENT_FRAGMENT_NODE</td></tr></tbody></table> <h4 id="nodename、nodevalue"><a href="#nodename、nodevalue" class="header-anchor">#</a> nodeName、nodeValue</h4> <p><code>nodeName</code> 属性返回节点的名称，<code>nodeValue</code> 属性返回一个字符串，表示当前节点本身的文本值，该属性可读写。</p> <p>只有文本节点（text）、注释节点（comment）和属性节点（attr）有文本值，因此这三类节点的 <code>nodeValue</code> 可以返回结果，其他类型的节点一律返回 <code>null</code>。同样的，也只有这三类节点可以设置 <code>nodeValue</code> 属性的值，其他类型的节点设置无效。</p> <table><thead><tr><th>节点类型</th> <th>nodeName</th> <th>nodeValue</th></tr></thead> <tbody><tr><td>Element（元素节点）</td> <td>大写的标签名</td> <td>null</td></tr> <tr><td>Attr（属性节点）</td> <td>属性的名称</td> <td>属性的值</td></tr> <tr><td>Text（文本节点）</td> <td>#text</td> <td>节点所包含的文本</td></tr> <tr><td>Comment（注释节点）</td> <td>#comment</td> <td>注释的内容</td></tr> <tr><td>Document（文档节点）</td> <td>#document</td> <td>null</td></tr> <tr><td>DocumentType（文档类型节点）</td> <td>文档的类型</td> <td>null</td></tr> <tr><td>DocumentFragment（文档片段节点）</td> <td>#document-fragment</td> <td>null</td></tr></tbody></table> <h2 id="domready"><a href="#domready" class="header-anchor">#</a> DOMReady</h2> <h3 id="什么是domready"><a href="#什么是domready" class="header-anchor">#</a> 什么是domReady</h3> <p>HTML 是一种标记语言，它告诉我们这个页面有什么内容，但行为交互是需要通过 DOM 操作来实现的。html标签要通过浏览器解析才会变成DOM节点，当我们向地址栏传入一个 url 的时候，开始加载页面，我们就能看到内容，在这期间就有一个 DOM 节点构建的过程。节点是以树的形式组织的，当页面上所有的 html 都转换为节点以后，就叫做 DOM 树构建完毕，简称为 domReady 。</p> <h3 id="浏览器渲染引擎的基本渲染流程"><a href="#浏览器渲染引擎的基本渲染流程" class="header-anchor">#</a> 浏览器渲染引擎的基本渲染流程</h3> <h3 id="domready的实现策略"><a href="#domready的实现策略" class="header-anchor">#</a> domReady的实现策略</h3> <p>上面的各个代码实例中，并没有考虑domReady，程序也能正常运行，因为我们把javascript代码写在了body元素最后的位置。因为浏览器是从上到下，从左向右渲染元素的，这样实例中的js代码一定在domReady之后去执行的。那为什么还要用domReady呢？事实上，我们在编写大型项目的时候，js文件往往非常多，而且之间会相互调用，大多数都是外部引用的，不把js代码直接写在页面上。这样的话，如果有个domReady这个方法，我们想用它就调用，不管逻辑代码写在哪里，都是等到domReady之后去执行的。</p> <p>window.onload方法，表示当页面所有的元素都加载完毕，并且所有要请求的资源也加载完毕才触发执行function这个匿名函数里边的具体内容。这样肯定保证了代码在domReady之后执行。使用window.onload方法在文档外部资源不多的情况下不会有什么问题，但是当页面中有大量远程图片或要请求的远程资源时，我们需要让js在点击每张图片时，进行相应的操作，如果此时外部资源还没有加载完毕，点击图片是不会有任何反应的，大大降低了用户体验。那既然window.onload方法不可行，又该怎么做呢？</p> <p>为了解决window.onload的短板，w3c 新增了一个 DOMContentLoaded 事件。关于DOMContentLoaded事件更多的内容，可以查看：</p> <p><a href="https://segmentfault.com/a/1190000005869515" target="_blank" rel="noopener noreferrer">浅谈DOMContentLoaded事件及其封装方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>参考jquery中domReady的实现原理，来看一下javascript中domReady的实现策略。</p> <p>在页面的DOM树创建完成后（也就是HTML解析第一步完成）即触发，而无需等待其他资源的加载。即domReady实现策略：</p> <blockquote><ol><li>支持DOMContentLoaded事件的，就使用DOMContentLoaded事件。</li> <li>不支持的就用来自Diego Perini发现的著名Hack兼容。兼容原理大概就是通过IE中的document，
documentElement.doScroll('left')来判断DOM树是否创建完毕。</li></ol></blockquote> <p>JavaScript实现domReady，【domReady.js】</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myReady</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token comment">//对于现代浏览器，对DOMContentLoaded事件的处理采用标准的事件绑定方式  </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>addEventListener <span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  
        <span class="token function">IEContentLoaded</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token comment">//IE模拟DOMContentLoaded  </span>
    <span class="token keyword">function</span> <span class="token function">IEContentLoaded</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">var</span> d <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">;</span>  
        <span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
  
        <span class="token comment">//只执行一次用户的回调函数init()  </span>
        <span class="token keyword">var</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
                <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span><span class="token punctuation">;</span>  
        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">try</span> <span class="token punctuation">{</span>  
                <span class="token comment">// DOM树未创建完之前调用doScroll会抛出错误  </span>
                d<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">doScroll</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                <span class="token comment">//延迟再试一次~  </span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token keyword">return</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span>  
            <span class="token comment">// 没有错误就表示DOM树创建完毕，然后立马执行用户回调  </span>
            <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">//监听document的加载状态  </span>
        d<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// 如果用户是在domReady之后绑定的函数，就立马执行  </span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">'complete'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
                d<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  
                <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>在页面中引入donReady.js文件，引用myReady(回调函数)方法即可。</p> <p><a href="https://www.cnblogs.com/JulyZhang/archive/2011/02/12/1952484.html" target="_blank" rel="noopener noreferrer">扩展阅读——主流JS框架中DOMReady事件的实现<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="节点操作"><a href="#节点操作" class="header-anchor">#</a> 节点操作</h2> <h3 id="创建节点"><a href="#创建节点" class="header-anchor">#</a> 创建节点</h3> <h4 id="document-createelement"><a href="#document-createelement" class="header-anchor">#</a> document.createElement()</h4> <p><code>document.createElement</code> 方法用来生成元素节点，并返回该节点。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> newDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>createElement</code> 方法的参数为元素的标签名，即元素节点的 <code>tagName</code> 属性，对于 HTML 网页大小写不敏感，即参数为 <code>div</code> 或 <code>DIV</code> 返回的是同一种节点。如果参数里面包含尖括号（即 <code>&lt;</code> 和 <code>&gt;</code>）会报错。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DOMException: The tag name provided ('&lt;div&gt;') is not a valid name</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果传入的标签名是一个未知的，则会创建一个自定义的标签，注意：IE8以下浏览器不支持自定义标签。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时通过 <code>createElement</code> 创建的元素并不属于 HTML 文档，它只是创建出来，并未添加到 HTML 文档中，要调用 <code>appendChild</code> 或 <code>insertBefore</code> 等方法将其添加到 HTML 文档树中。（后面会讲到）</p> <h4 id="document-createtextnode"><a href="#document-createtextnode" class="header-anchor">#</a> document.createTextNode()</h4> <p><code>document.createTextNode</code> 方法用来生成文本节点（<code>Text</code> 实例），并返回该节点。它的参数是文本节点的内容。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> newContent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>createTextNode</code> 接收一个参数，这个参数就是文本节点中的文本，和 <code>createElement</code> 一样，创建后的文本节点也只是独立的一个节点，同样需要 <code>appendChild</code> 将其添加到 HTML 文档树中。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'&lt;span&gt;Foo &amp; bar&lt;/span&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
<span class="token comment">// &amp;lt;span&amp;gt;Foo &amp;amp; bar&amp;lt;/span&amp;gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>createTextNode</code> 方法对大于号和小于号进行转义，从而保证即使用户输入的内容包含恶意代码，也能正确显示。</p> <p>需要注意的是，该方法不对单引号和双引号转义，所以不能用来对 HTML 属性赋值。</p> <h4 id="document-createattribute"><a href="#document-createattribute" class="header-anchor">#</a> document.createAttribute()</h4> <p><code>document.createAttribute</code> 方法生成一个新的属性节点（<code>Attr</code> 实例），并返回它。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> attribute <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.createAttribute</code> 方法的参数 <code>name</code> ，是属性的名称。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createAttribute</span><span class="token punctuation">(</span><span class="token string">'my_attrib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'newVal'</span><span class="token punctuation">;</span>

node<span class="token punctuation">.</span><span class="token function">setAttributeNode</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或者</span>
node<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'my_attrib'</span><span class="token punctuation">,</span> <span class="token string">'newVal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面代码为 <code>div1</code> 节点，插入一个值为 <code>newVal</code> 的 <code>my_attrib</code> 属性。</p> <h4 id="document-createdocumentfragment"><a href="#document-createdocumentfragment" class="header-anchor">#</a> document.createDocumentFragment()</h4> <p><code>document.createDocumentFragment</code> 方法生成一个空的文档片段对象（<code>DocumentFragment</code> 实例）。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> docFragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>DocumentFragment</code> 是一个存在于内存的 DOM 片段，不属于当前文档，常常用来生成一段较复杂的 DOM 结构，然后再插入当前文档。这样做的好处在于，因为 <code>DocumentFragment</code> 不属于当前文档，对它的任何改动，都不会引发网页的重新渲染，比直接修改当前文档的 DOM 有更好的性能表现。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> element  <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  li<span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">;</span>
  element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这段代码会创建了 4 个 <code>&lt;li&gt;</code> 节点，然后依次将其添加 HTML 文档中。这样做有一个缺点：每次创建一个新的元素，然后添加到文档树中，这个过程会造成浏览器的回流。所谓回流简单说就是指元素大小和位置会被重新计算，如果添加的元素太多，会造成性能问题。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> docfrag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  li<span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">;</span>
  docfrag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> element  <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>docfrag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上面优化后的代码，先创建了一个文档片段 <code>docfrag</code> ，每次生成的 <code>&lt;li&gt;</code> 节点先添加到 <code>docfrag</code> ，最后一次性添加到当前文档。</p> <h3 id="操作节点"><a href="#操作节点" class="header-anchor">#</a> 操作节点</h3> <h4 id="appendchild"><a href="#appendchild" class="header-anchor">#</a> appendChild()</h4> <p><code>appendChild</code> 方法接受一个节点对象作为参数，将其作为最后一个子节点，插入当前节点。该方法的返回值就是插入文档的子节点。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码新建一个 <code>&lt;p&gt;</code> 节点，将其插入 <code>document.body</code> 的尾部。</p> <p>==如果参数节点是 DOM 已经存在的节点，<code>appendChild()</code> 方法会将其从原来的位置，移动到新位置，任何一个节点不能同时出现在文档中的多个位置==。这里还有一个要注意的点：节点在被移动时，会保留其绑定的事件。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码中，插入的是一个已经存在的节点 <code>myDiv</code> ，结果就是该节点会从原来的位置，移动到 <code>document.body</code> 的尾部。</p> <p>如果 <code>appendChild()</code> 方法的参数是 <code>DocumentFragment</code> 节点，那么插入的是 <code>DocumentFragment</code> 的所有子节点，而不是 <code>DocumentFragment</code> 节点本身。返回值是一个空的 <code>DocumentFragment</code> 节点。</p> <h4 id="insertbefore"><a href="#insertbefore" class="header-anchor">#</a> insertBefore()</h4> <p><code>insertBefore</code> 方法用于将某个节点插入父节点内部的指定位置。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> insertedNode <span class="token operator">=</span> parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> referenceNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>insertBefore</code> 方法接受两个参数，第一个参数是所要插入的节点 <code>newNode</code> ，第二个参数是父节点 <code>parentNode</code> 内部的一个子节点 <code>referenceNode</code> 。<code>newNode</code> 将插在 <code>referenceNode</code> 这个子节点的前面。返回值是插入的新节点 <code>newNode</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码中，新建一个 <code>&lt;p&gt;</code> 节点，插在 <code>document.body.firstChild</code> 的前面，也就是成为 <code>document.body</code> 的第一个子节点。</p> <p>如果 <code>insertBefore</code> 方法的第二个参数为 <code>null</code> ，则新节点将插在当前节点内部的最后位置，即变成最后一个子节点。这也说明 <code>insertBefore</code> 的第二个参数不能省略。</p> <p>注意，==如果所要插入的节点是当前 DOM 现有的节点，则该节点将从原有的位置移除，插入新的位置==。</p> <p>由于不存在 <code>insertAfter</code> 方法，如果新节点要插在父节点的某个子节点后面，可以用 <code>insertBefore</code> 方法结合 <code>nextSibling</code> 属性模拟。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>parent<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码中，<code>parent</code> 是父节点，<code>s1</code> 是一个全新的节点，<code>s2.nextSibling</code> 是可以将 <code>s1</code> 节点插在 <code>s2</code> 节点的后面。如果 <code>s2</code> 是当前节点的最后一个子节点，则 <code>s2.nextSibling</code> 返回 <code>null</code> ，这时 <code>s1</code> 节点会插在当前节点的最后，变成当前节点的最后一个子节点，等于紧跟在 <code>s2</code> 的后面。</p> <p>如果要插入的节点是 <code>DocumentFragment</code> 类型，那么插入的将是 <code>DocumentFragment</code> 的所有子节点，而不是 <code>DocumentFragment</code> 节点本身。返回值将是一个空的 <code>DocumentFragment</code> 节点。</p> <h4 id="removechild"><a href="#removechild" class="header-anchor">#</a> removeChild()</h4> <p><code>removeChild</code> 方法接受一个子节点作为参数，用于从当前节点移除该子节点。返回值是移除的子节点。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> divA <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
divA<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>divA<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码移除了 <code>divA</code> 节点。注意，这个方法是在 <code>divA</code> 的父节点上调用的，不是在 <code>divA</code> 上调用的。</p> <p>下面是其他几种删除子节点的方式。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 先定位父节点，然后删除其子节点</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d_nested <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;nested&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> throwawayNode <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>d_nested<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 无须定位父节点，通过parentNode属性直接删除自身</span>
<span class="token keyword">var</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;nested&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移除一个元素节点的所有子节点</span>
<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>被移除的节点依然存在于内存之中，但不再是 DOM 的一部分。所以，一个节点移除以后，依然可以把这个节点重新添加回文档中。当然，事先要用另外一个变量，比如上面代码中第一个例子的 <code>throwawayNode</code> 来保存这个节点的引用。如果没有使用变量来保存对这个节点的引用，则认为被移除的节点已经是无用的，在短时间内将会被内存管理回收。</p> <p>如果参数节点不是当前节点的子节点，<code>removeChild</code> 方法将报错。</p> <h4 id="replacechild"><a href="#replacechild" class="header-anchor">#</a> replaceChild()</h4> <p><code>replaceChild</code> 方法用于将一个新的节点，替换当前节点的某一个子节点。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> replacedNode <span class="token operator">=</span> parentNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newChild<span class="token punctuation">,</span> oldChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码中，<code>replaceChild</code> 方法接受两个参数，第一个参数 <code>newChild</code> 是用来替换的新节点，第二个参数 <code>oldChild</code> 是将要被替换的子节点。返回值是被替换的那个节点 <code>oldChild</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> divA <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'divA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newSpan <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newSpan<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
divA<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newSpan<span class="token punctuation">,</span> divA<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面代码是如何将指定节点 <code>divA</code> 替换走。</p> <h4 id="clonenode"><a href="#clonenode" class="header-anchor">#</a> cloneNode()</h4> <p><code>cloneNode</code> 方法用于克隆一个节点。它接受一个布尔值作为参数，表示是否同时克隆子节点。它的返回值是一个克隆出来的新节点。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> parent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;parentElement&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> parent2 <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 传入true</span>
parent2<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&quot;parent2&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码通过 <code>cloneNode</code> 方法复制了一份 <code>parent</code> 元素，其中 <code>cloneNode</code> 的参数为 <code>true</code> ，表示 <code>parent</code> 的子节点也被复制，如果传入 <code>false</code> ，则表示只复制 <code>parent</code> 节点本身，文本或者换行、空格这些不会复制，因为它们都是一个 <code>textNode</code> 。</p> <p>该方法有一些使用注意点。</p> <ul><li>该方法返回的节点不在文档之中，即没有任何父节点，必须使用诸如 <code>appendChild</code> 这样的方法添加到文档之中。</li> <li>克隆一个节点，会拷贝该节点的所有属性，当然也就包括了属性上绑定的事件(比如 <code>onclick=&quot;alert(1)&quot;</code> ),但不会拷贝那些使用 <code>addEventListener()</code> 方法或者 <code>node.onclick = fn</code> 这种用 JavaScript 动态绑定的事件。</li> <li>克隆一个节点之后，DOM 有可能出现两个有相同 <code>id</code> 属性（即 <code>id=&quot;xxx&quot;</code>）的网页元素，这时应该修改其中一个元素的 <code>id</code> 属性。如果原节点有 <code>name</code> 属性，可能也需要修改。</li></ul> <h3 id="查找节点"><a href="#查找节点" class="header-anchor">#</a> 查找节点</h3> <h4 id="通过节点关系查找"><a href="#通过节点关系查找" class="header-anchor">#</a> 通过节点关系查找</h4> <h4 id="document-getelementbyid"><a href="#document-getelementbyid" class="header-anchor">#</a> document.getElementById()</h4> <p><code>document.getElementById</code> 方法返回匹配指定 id 属性的元素节点，返回值是 Element 类型。如果没有发现匹配的节点，则返回 <code>null</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'para1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用这个接口有几点要注意：</p> <ul><li>该方法的参数是大小写敏感的。比如，如果某个节点的 id 属性是 <code>main</code> ，那么 <code>document.getElementById('Main')</code> 将返回 <code>null</code> 。</li> <li>HTML 文档中可能存在多个 id 相同的元素，使用该方法查找，则返回文档中第一个元素。</li> <li>该方法只从文档中搜索元素，如果创建了一个元素并指定 id，但并没有添加到文档中，则不能通过该方法获取到。</li></ul> <p><code>document.getElementById</code> 方法与 <code>document.querySelector</code> 方法都能获取元素节点，不同之处是 <code>document.querySelector</code> 方法的参数使用 CSS 选择器语法，<code>document.getElementById</code> 方法的参数是元素的 id 属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myElement'</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#myElement'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码中，两个方法都能选中 id 为 <code>myElement</code> 的元素，但是 <code>document.getElementById()</code> 比 <code>document.querySelector()</code> 效率高得多。</p> <p>另外，==这个方法只能在 <code>document</code> 对象上使用，不能在其他元素节点上使用==。</p> <h4 id="document-getelementsbytagname"><a href="#document-getelementsbytagname" class="header-anchor">#</a> document.getElementsByTagName()</h4> <p><code>document.getElementsByTagName</code> 方法搜索 HTML 标签名，返回符合条件的元素。它的返回值是一个类数组对象（ <code>HTMLCollection</code> 实例），可以实时反映 HTML 文档的变化。如果没有任何匹配的元素，就返回一个空集。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> paras <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
paras <span class="token keyword">instanceof</span> <span class="token class-name">HTMLCollection</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码返回当前文档的所有 <code>p</code> 元素节点。</p> <p>HTML 标签名是大小写不敏感的，因此 <code>getElementsByTagName</code> 方法也是大小写不敏感的。另外，返回结果中，各个成员的顺序就是它们在文档中出现的顺序。</p> <p>使用document.getElementsByTagName这个方法有几点要注意：</p> <ul><li>如果要对 HTMLCollection 集合进行循环操作，最好将其长度缓存起来，因为每次循环都会去计算长度，暂时缓存起来可以提高效率。</li> <li>如果不存在指定的标签，该接口返回的不是 <code>null</code> ，而是一个空的 <code>HTMLCollection</code> 。</li> <li>如果参数传入 <code>*</code> ，就可以返回文档中所有 HTML 元素。</li></ul> <p>元素节点本身也定义了 <code>getElementsByTagName</code> 方法，返回该元素的后代元素中符合条件的元素。也就是说，==这个方法不仅可以在 <code>document</code> 对象上调用，也可以在任何元素节点上调用==。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> firstPara <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> spans <span class="token operator">=</span> firstPara<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码选中第一个 <code>p</code> 元素内部的所有 <code>span</code> 元素。</p> <h4 id="document-getelementsbyname"><a href="#document-getelementsbyname" class="header-anchor">#</a> document.getElementsByName()</h4> <p><code>document.getElementsByName</code> 方法用于选择拥有 <code>name</code> 属性的 HTML 元素（比如<code>&lt;form&gt;</code>、<code>&lt;radio&gt;</code>、<code>&lt;img&gt;</code>、<code>&lt;frame&gt;</code>、<code>&lt;embed&gt;</code> 和 <code>&lt;object&gt;</code> 等），返回一个即时的类数组对象（<code>NodeList</code> 实例），因为 <code>name</code> 属性相同的元素可能不止一个。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 表单为 &lt;form name=&quot;x&quot;&gt;&lt;/form&gt;</span>
<span class="token keyword">var</span> forms <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tagName <span class="token comment">// &quot;FORM&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用这个接口要注意几点：</p> <ul><li>返回对象是一个即时的 NodeList，它是随时变化的。</li> <li>在 HTML 元素中，并不是所有元素都有 <code>name</code> 属性，比如 <code>div</code> 是没有 <code>name</code> 属性的，但是如果强制给其设置 <code>name</code> 属性，它也是可以被查找到的。</li> <li>在 IE 中，如果 <code>id</code> 设置成某个值，然后传入 <code>getElementsByName</code> 的参数值和 <code>id</code> 值一样，则这个元素是会被找到的，所以最好不好设置同样的值给 <code>id</code> 和 <code>name</code> 。</li></ul> <h4 id="document-getelementsbyclassname"><a href="#document-getelementsbyclassname" class="header-anchor">#</a> document.getElementsByClassName()</h4> <p><code>document.getElementsByClassName</code> 方法返回一个类数组对象（<code>HTMLCollection</code> 实例），包括了所有 <code>class</code> 名字符合指定条件的元素，元素的变化实时反映在返回结果中。当在 <code>document</code> 对象上调用此方法时，会检索整个文档，包括根元素。(IE9以下浏览器不支持)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> elements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由于 <code>class</code> 是保留字，所以 JavaScript 一律使用 <code>className</code> 表示 CSS 的 <code>class</code> 。</p> <p>参数可以是多个 <code>class</code> ，它们之间使用空格分隔。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> elements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码返回同时具有 <code>foo</code> 和 <code>bar</code> 两个 class 的元素，<code>foo</code> 和 <code>bar</code> 的顺序不重要。</p> <p>注意，正常模式下，CSS 的 <code>class</code> 是大小写敏感的。（quirks mode下，大小写不敏感。）</p> <p>与 <code>getElementsByTagName</code> 方法一样，==<code>getElementsByClassName</code> 方法不仅可以在 <code>document</code> 对象上调用，也可以在任何元素节点上调用==。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 非document对象上调用</span>
<span class="token keyword">var</span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>由于 HTMLCollection 实例是一个活的集合，<code>document</code> 对象的任何变化会立刻反应到实例，下面的代码不会生效。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码如下</span>
<span class="token comment">// &lt;div id=&quot;example&quot;&gt;</span>
<span class="token comment">//   &lt;p class=&quot;foo&quot;&gt;&lt;/p&gt;</span>
<span class="token comment">//   &lt;p class=&quot;foo&quot;&gt;&lt;/p&gt;</span>
<span class="token comment">// &lt;/div&gt;</span>
<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> matches <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> matches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  matches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  matches<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 执行后，HTML 代码如下</span>
<span class="token comment">// &lt;div id=&quot;example&quot;&gt;</span>
<span class="token comment">//   &lt;p&gt;&lt;/p&gt;</span>
<span class="token comment">//   &lt;p class=&quot;foo bar&quot;&gt;&lt;/p&gt;</span>
<span class="token comment">// &lt;/div&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>上面代码中，<code>matches</code> 集合的第一个成员，一旦被拿掉 <code>class</code> 里面的 <code>foo</code> ，就会立刻从 <code>matches</code> 里面消失，导致出现上面的结果。</p> <h4 id="document-queryselector-和-document-queryselectorall"><a href="#document-queryselector-和-document-queryselectorall" class="header-anchor">#</a> document.querySelector() 和 document.querySelectorAll()</h4> <p><code>document.querySelector</code> 方法接受一个 CSS 选择器作为参数，返回节点子树内匹配该选择器的第一个元素节点。如果没有匹配的节点，则返回 <code>null</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.myclass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.querySelectorAll</code> 方法接受 CSS 选择器作为参数，返回一个元素节点列表（<code>NodeList</code> 实例），包含所有匹配给定选择器的节点，如果没有相匹配的，则返回一个空节点列表。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>elementList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.myclass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这两个方法的参数，可以是逗号分隔的多个 CSS 选择器，返回匹配其中一个选择器的元素节点，这与 CSS 选择器的规则是一致的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> matches <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div.note, div.alert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码返回 <code>class</code> 属性是 <code>note</code> 或 <code>alert</code> 的 <code>div</code> 元素。</p> <p>这两个方法都支持复杂的 CSS 选择器。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 选中 data-foo-bar 属性等于 someval 的元素</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[data-foo-bar=&quot;someval&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 选中 myForm 表单中所有不通过验证的元素</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'#myForm :invalid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 选中div元素，那些 class 含 ignore 的除外</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'DIV:not(.ignore)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 同时选中 div，a，script 三类元素</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'DIV, A, SCRIPT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>但是，它们不支持 CSS 伪元素的选择器（比如 <code>:first-line</code> 和 <code>:first-letter</code> ）和伪类的选择器（比如 <code>:link</code> 和 <code>:visited</code> ），即无法选中伪元素和伪类。</p> <p>如果 <code>querySelectorAll</code> 方法的参数是字符串 <code>*</code> ，则会返回文档中的所有元素节点。另外，==<code>querySelectorAll</code> 的返回结果不是动态集合，不会实时反映元素节点的变化==。</p> <p>这两个方法除了定义在 <code>document</code> 对象上，还定义在元素节点上，即在元素节点上也可以调用。</p> <p>==兼容性问题：<code>querySelector</code> 和 <code>querySelectorAll</code> 在 IE8 以下的浏览器不支持==。</p> <h2 id="属性操作"><a href="#属性操作" class="header-anchor">#</a> 属性操作</h2> <h3 id="element-attributes-属性"><a href="#element-attributes-属性" class="header-anchor">#</a> Element.attributes 属性</h3> <p>元素对象有一个 <code>attributes</code> 属性，返回一个类数组的动态对象，成员是该元素标签的所有属性节点对象，属性的实时变化都会反映在这个节点对象上。其他类型的节点对象，虽然也有 <code>attributes</code> 属性，但返回的都是 <code>null</code> ，因此可以把这个属性视为元素对象独有的。</p> <p>单个属性可以通过序号引用，也可以通过属性名引用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码如下</span>
<span class="token comment">// &lt;body bgcolor=&quot;yellow&quot; onload=&quot;&quot;&gt;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>bgcolor
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">'ONLOAD'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意，上面代码的三种方法，返回的都是属性节点对象，而不是属性值。</p> <p>属性节点对象有 <code>name</code> 和 <code>value</code> 属性，对应该属性的属性名和属性值，等同于 <code>nodeName</code> 属性和 <code>nodeValue</code> 属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML代码为</span>
<span class="token comment">// &lt;div id=&quot;mydiv&quot;&gt;</span>
<span class="token keyword">var</span> n <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mydiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

n<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token comment">// &quot;id&quot;</span>
n<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName <span class="token comment">// &quot;id&quot;</span>

n<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token comment">// &quot;mydiv&quot;</span>
n<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue <span class="token comment">// &quot;mydiv&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下面代码可以遍历一个元素节点的所有属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> para <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>para<span class="token punctuation">.</span><span class="token function">hasAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> attrs <span class="token operator">=</span> para<span class="token punctuation">.</span>attributes<span class="token punctuation">;</span>
    <span class="token keyword">var</span> output <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> attrs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        output <span class="token operator">+=</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'-&gt;'</span> <span class="token operator">+</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> output<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'No attributes to show'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="属性操作的标准方法"><a href="#属性操作的标准方法" class="header-anchor">#</a> 属性操作的标准方法</h3> <p><strong>1、Element.getAttribute()</strong></p> <p><code>Element.getAttribute</code> 方法返回当前元素节点的指定属性。如果指定属性不存在，则返回 <code>null</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;div id=&quot;div1&quot; align=&quot;left&quot;&gt;</span>
<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;left&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意：IE7 下不能正确返回 class，返回的是 <code>null</code> ，其他正常。</p> <p><strong>2、Element.getAttributeNames()</strong></p> <p><code>Element.getAttributeNames()</code> 返回一个数组，成员是当前元素的所有属性的名字。如果当前元素没有任何属性，则返回一个空数组。使用 <code>Element.attributes</code> 属性，也可以拿到同样的结果，唯一的区别是它返回的是类似数组的对象。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> mydiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mydiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mydiv<span class="token punctuation">.</span><span class="token function">getAttributeNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> value <span class="token operator">=</span> mydiv<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面代码用于遍历某个节点的所有属性。</p> <p><strong>3、Element.setAttribute()</strong></p> <p><code>Element.setAttribute</code> 方法用于为当前元素节点新增属性。如果同名属性已存在，则相当于编辑已存在的属性。该方法没有返回值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;button&gt;Hello World&lt;/button&gt;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'myButton'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面代码中，<code>button</code> 元素的 <code>name</code> 属性被设成 <code>myButton</code> 。</p> <p>注意：在 IE7 下，修改了元素的 <code>class</code> ，如果已有 <code>class</code> ，则会出现两个 <code>class</code> ，通过 <code>setAttribute()</code> 添加的不生效；如果没有 <code>class</code> ，则添加上 <code>class</code> ，但这个添加上去的 <code>class</code> 的样式不会生效。</p> <p><strong>4、Element.hasAttribute()</strong></p> <p><code>Element.hasAttribute</code> 方法返回一个布尔值，表示当前元素节点是否包含指定属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> d <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">,</span> <span class="token string">'center'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面代码检查 <code>div</code> 节点是否含有 <code>align</code> 属性。如果有，则设置为居中对齐。</p> <p>注意：IE7不支持该方法。</p> <p><strong>5、Element.hasAttributes()</strong></p> <p><code>Element.hasAttributes</code> 方法返回一个布尔值，表示当前元素是否有属性，如果没有任何属性，就返回 <code>false</code> ，否则返回 <code>true</code> 。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">hasAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>6、Element.removeAttribute()</strong></p> <p><code>Element.removeAttribute</code> 方法移除指定属性。该方法没有返回值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;div id=&quot;div1&quot; align=&quot;left&quot; width=&quot;200px&quot;&gt;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 现在的HTML代码为</span>
<span class="token comment">// &lt;div id=&quot;div1&quot; width=&quot;200px&quot;&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="元素的标准属性"><a href="#元素的标准属性" class="header-anchor">#</a> 元素的标准属性</h3> <p>HTML 元素的标准属性（即在标准中定义的属性），会自动成为元素节点对象的属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>id <span class="token comment">// &quot;test&quot;</span>
a<span class="token punctuation">.</span>href <span class="token comment">// &quot;http://www.example.com/&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码中，<code>a</code> 元素标签的属性 <code>id</code> 和 <code>href</code> ，自动成为节点对象的属性。</p> <p>这些属性都是可写的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myImage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.example.com/image.jpg'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面的写法，会立刻替换掉 <code>img</code> 对象的 <code>src</code> 属性，即会显示另外一张图片。</p> <p>这种修改属性的方法，常常用于添加表单的属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> f <span class="token operator">=</span> document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>action <span class="token operator">=</span> <span class="token string">'submit.php'</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>method <span class="token operator">=</span> <span class="token string">'POST'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码为表单添加提交网址和提交方法。</p> <p>注意，这种用法虽然可以读写属性，但是无法删除属性，<code>delete</code> 运算符在这里不会生效。</p> <p>HTML 元素的属性名是大小写不敏感的，但是 JavaScript 对象的属性名是大小写敏感的。转换规则是，转为 JavaScript 属性名时，一律采用小写。如果属性名包括多个单词，则采用骆驼拼写法，即从第二个单词开始，每个单词的首字母采用大写，比如 <code>onClick</code> 。</p> <p>有些 HTML 属性名是 JavaScript 的保留字，转为 JavaScript 属性时，必须改名。主要是以下两个。</p> <ul><li><code>for</code> 属性改为 <code>htmlFor</code></li> <li><code>class</code> 属性改为 <code>className</code></li></ul> <p>另外，HTML 属性值一般都是字符串，但是 JavaScript 属性会自动转换类型。比如，将字符串 <code>true</code> 转为布尔值，将 <code>onClick</code> 的值转为一个函数，将 <code>style</code> 属性的值转为一个 <code>CSSStyleDeclaration</code> 对象。因此，可以对这些属性赋予各种类型的值。</p> <p>状态属性（enabled、disabled、checked、selected）的值都是 bool 类型，不是字符串类型，不能用核心 DOM API 来修改，只能用标准属性的 <code>.</code> 来访问。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;button&gt;Hello World&lt;/button&gt;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上例的 <code>disable</code> 属性是一个布尔属性，对于 <code>&lt;button&gt;</code> 元素来说，这个属性不需要属性值，只要设置了就总是会生效，因此不能使用 <code>setAttribute</code> 方法，只能使用 <code>.</code> 来访问。</p> <h3 id="自定义扩展属性"><a href="#自定义扩展属性" class="header-anchor">#</a> 自定义扩展属性</h3> <p>有时，需要在 HTML 元素上附加数据，供 JavaScript 脚本使用。一种解决方法是自定义属性。</p> <ul><li>用自定义扩展属性作为条件，选择要绑定事件的元素，避免 id、class、元素选择器的弊端；</li> <li>在客户端元素上临时缓存业务数据，避免重复请求服务端造成延迟；</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mydiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">foo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码为 <code>div</code> 元素自定义了 <code>foo</code> 属性，然后可以用 <code>getAttribute()</code> 和 <code>setAttribute()</code> 读写这个属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> n <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mydiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// bar</span>
n<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这种方法虽然可以达到目的，但是会使得 HTML 元素的属性不符合标准，导致网页代码通不过校验。</p> <p>更好的解决方法是，使用标准提供的 <code>data-*</code> 属性。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mydiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-foo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后，使用元素节点对象的 <code>dataset</code> 属性，它指向一个对象，可以用来操作 HTML 元素标签的 <code>data-*</code> 属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> n <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mydiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
n<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>foo <span class="token comment">// bar</span>
n<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'baz'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码中，通过 <code>dataset.foo</code> 读写 <code>data-foo</code> 属性。</p> <p>删除一个 <code>data-*</code> 属性，可以直接使用 <code>delete</code> 命令。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">delete</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>除了 <code>dataset</code> 属性，也可以用 <code>getAttribute()</code>、<code>removeAttribute()</code>、<code>setAttribute()</code>、<code>hasAttribute()</code> 等方法操作 <code>data-*</code> 属性。</p> <p>注意，<code>data-</code> 后面的属性名有限制，只能包含字母、数字、连词线（<code>-</code>）、点（<code>.</code>）、冒号（<code>:</code>）和下划线（<code>_</code>)。而且，属性名不应该使用 <code>A</code> 到 <code>Z</code> 的大写字母，比如不能有 <code>data-helloWorld</code> 这样的属性名，而要写成 <code>data-hello-world</code> 。</p> <p>转成 <code>dataset</code> 的键名时，连词线后面如果跟着一个小写字母，那么连词线会被移除，该小写字母转为大写字母，其他字符不变。反过来，<code>dataset</code> 的键名转成属性名时，所有大写字母都会被转成连词线+该字母的小写形式，其他字符不变。比如，<code>dataset.helloWorld</code> 会转成 <code>data-hello-world</code> 。</p> <h2 id="样式操作"><a href="#样式操作" class="header-anchor">#</a> 样式操作</h2> <h3 id="html-元素的-style-属性"><a href="#html-元素的-style-属性" class="header-anchor">#</a> HTML 元素的 style 属性</h3> <p>操作 CSS 样式最简单的方法，就是使用网页元素节点的 <code>getAttribute()</code> 方法、<code>setAttribute()</code> 方法和 <code>removeAttribute()</code> 方法，直接读写或删除网页元素的 <code>style</code> 属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
    <span class="token string">'style'</span><span class="token punctuation">,</span>
    <span class="token string">'background-color:red;'</span> <span class="token operator">+</span> <span class="token string">'border:1px solid black;'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的代码相当于下面的 HTML 代码。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span>1px solid black<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>style</code> 不仅可以使用字符串读写，它本身还是一个对象，部署了 CSSStyleDeclaration 接口（详见下面的介绍），可以直接读写个别属性。</p> <h3 id="cssstyledeclaration-接口"><a href="#cssstyledeclaration-接口" class="header-anchor">#</a> CSSStyleDeclaration 接口</h3> <p>CSSStyleDeclaration 接口用来操作元素的样式。三个地方部署了这个接口。</p> <ul><li>元素节点的 <code>style</code> 属性（Element.style）</li> <li>CSSStyle实例的 <code>style</code> 属性</li> <li><code>window.getComputedStyle()</code> 的返回值</li></ul> <p>CSSStyleDeclaration 接口可以直接读写 CSS 的样式属性，不过，连词号需要变成骆驼拼写法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> divStyle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">;</span>

divStyle<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
divStyle<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'1px solid black'</span><span class="token punctuation">;</span>
divStyle<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
divStyle<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
divStyle<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token string">'10em'</span><span class="token punctuation">;</span>

divStyle<span class="token punctuation">.</span>backgroundColor <span class="token comment">// red</span>
divStyle<span class="token punctuation">.</span>border <span class="token comment">// 1px solid black</span>
divStyle<span class="token punctuation">.</span>height <span class="token comment">// 100px</span>
divStyle<span class="token punctuation">.</span>width <span class="token comment">// 100px</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上面代码中，<code>style</code> 属性的值是一个 CSSStyleDeclaration 实例。这个对象所包含的属性与 CSS 规则一一对应，但是名字需要改写，比如 <code>background-color</code> 写成 <code>backgroundColor</code> 。==改写的规则是将横杠从 CSS 属性名中去除，然后将横杠后的第一个字母大写==。如果 CSS 属性名是 JavaScript 保留字，则规则名之前需要加上字符串 <code>css</code> ，比如 <code>float</code> 写成 <code>cssFloat</code> 。</p> <p>注意，该对象的属性值都是字符串，设置时必须包括单位，但是不含规则结尾的分号。比如，<code>divStyle.width</code> 不能写为 100，而要写为 100px。获取属性值进行计算时，需要用 <code>parseInt()</code> 转换成数值。</p> <p>另外，==<code>Element.style</code> 返回的只是行内样式，并不是该元素的全部样式==。通过样式表设置的样式，或者从父元素继承的样式，无法通过这个属性得到。==元素的全部样式要通过 <code>window.getComputedStyle()</code> 得到==。</p> <h3 id="window-getcomputedstyle"><a href="#window-getcomputedstyle" class="header-anchor">#</a> window.getComputedStyle()</h3> <p>行内样式（inline style）具有最高的优先级，改变行内样式，通常会立即反映出来。但是，网页元素最终的样式是综合各种规则计算出来的。因此，如果想得到元素实际的样式，只读取行内样式是不够的，需要得到浏览器最终计算出来的样式规则。</p> <p><code>window.getComputedStyle</code> 方法，就用来返回浏览器计算后得到的最终规则。它接受一个节点对象作为参数，返回一个 CSSStyleDeclaration 实例，包含了指定节点的最终样式信息。所谓“最终样式信息”，指的是各种 CSS 规则叠加后的结果。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> styleObj <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
styleObj<span class="token punctuation">.</span>backgroundColor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码中，得到的背景色就是 <code>div</code> 元素真正的背景色。</p> <p>注意，CSSStyleDeclaration 实例是一个活的对象，任何对于样式的修改，会实时反映到这个实例上面。另外，这个实例是只读的。</p> <p><code>getComputedStyle</code> 方法还可以接受第二个参数，表示当前元素的伪元素（比如 <code>:before</code>、<code>:after</code>、<code>:first-line</code>、<code>:first-letter</code> 等）。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">':before'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下面的例子是如何获取元素的高度。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'elem-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> styleObj <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> styleObj<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> styleObj<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> styleObj<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面代码得到的 <code>height</code> 属性，是浏览器最终渲染出来的高度，比其他方法得到的高度更可靠。由于 <code>styleObj</code> 是 CSSStyleDeclaration 实例，所以可以使用各种 CSSStyleDeclaration 的实例属性和方法。</p> <p>有几点需要注意。</p> <ul><li>CSSStyleDeclaration 实例返回的 CSS 值都是绝对单位。比如，长度都是像素单位（返回值包括 <code>px</code> 后缀），颜色是 <code>rgb(#, #, #)</code> 或 <code>rgba(#, #, #, #)</code> 格式。</li> <li>CSS 规则的简写形式无效。比如，想读取 <code>margin</code> 属性的值，不能直接读，只能读 <code>marginLeft</code>、<code>marginTop</code> 等属性；再比如，<code>font</code> 属性也是不能直接读的，只能读 <code>font-size</code> 等单个属性。</li> <li>如果读取 CSS 原始的属性名，要用方括号运算符，比如 <code>styleObj['z-index']</code> ；如果读取骆驼拼写法的 CSS 属性名，可以直接读取 <code>styleObj.zIndex</code> 。</li> <li>该方法返回的 CSSStyleDeclaration 实例的cssText属性无效，返回 <code>undefined</code> 。</li></ul> <h2 id="dom-常用对象"><a href="#dom-常用对象" class="header-anchor">#</a> DOM 常用对象</h2> <h3 id="image-对象"><a href="#image-对象" class="header-anchor">#</a> Image 对象</h3> <p><code>&lt;img&gt;</code> 元素用于插入图片，主要继承了 HTMLImageElement 接口。</p> <p>浏览器提供一个原生构造函数 <code>Image</code> ，用于生成 HTMLImageElement 实例。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">Image</span> <span class="token comment">// true</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">HTMLImageElement</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Image</code> 构造函数可以接受两个整数作为参数，分别表示 <code>&lt;img&gt;</code> 元素的宽度和高度。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 语法</span>
<span class="token function">Image</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>

<span class="token comment">// 用法</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>&lt;img&gt;</code> 实例的 <code>src</code> 属性可以定义图像的网址。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'picture.jpg'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>新生成的 <code>&lt;img&gt;</code> 实例并不属于文档的一部分。如果想让它显示在文档中，必须手动插入文档。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'image1.png'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>除了使用 <code>Image</code> 构造，下面的方法也可以得到 HTMLImageElement 实例。</p> <ul><li><code>document.images</code> 的成员</li> <li>节点选取方法（比如 <code>document.getElementById</code> ）得到的 <code>&lt;img&gt;</code> 节点</li> <li><code>document.createElement('img')</code> 生成的 <code>&lt;img&gt;</code> 节点</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">HTMLImageElement</span>
<span class="token comment">// true</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myImg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">HTMLImageElement</span>
<span class="token comment">// true</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">HTMLImageElement</span>
<span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="select-对象"><a href="#select-对象" class="header-anchor">#</a> Select 对象</h3> <h3 id="table-对象"><a href="#table-对象" class="header-anchor">#</a> Table 对象</h3> <p>Table 对象代表页面上一个 <code>&lt;table&gt;</code> 元素。</p> <p>行分组操作</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 添加行分组</span>
<span class="token keyword">var</span> thead <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">createTHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> tbody <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">createTBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> tfoot <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">createTFoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删除行分组</span>
table<span class="token punctuation">.</span><span class="token function">deleteTHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">deleteTFoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取行分组</span>
table<span class="token punctuation">.</span><span class="token function">tHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">tBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">tFoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>行操作</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 添加行</span>
<span class="token keyword">var</span> tr <span class="token operator">=</span> 行分组<span class="token punctuation">.</span><span class="token function">insertRow</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在当前行分组中 i 位置，插入一个新行</span>
<span class="token comment">// 固定用法</span>
行分组<span class="token punctuation">.</span><span class="token function">insertRow</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 开头插入</span>
行分组<span class="token punctuation">.</span><span class="token function">insertRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 末尾追加</span>

<span class="token comment">// 删除行</span>
行分组<span class="token punctuation">.</span><span class="token function">deleteRow</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 删除行分组内 i 位置的行，i 是相对于行分组内的下标</span>
<span class="token comment">// 问题：行分组内的下标位置无法自动获得</span>
<span class="token comment">// 解决方案：</span>
table<span class="token punctuation">.</span><span class="token function">deleteRow</span><span class="token punctuation">(</span>tr<span class="token punctuation">.</span>rowIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tr.rowIndex 可获得 tr 在整个表中的下标位置</span>

<span class="token comment">// 获取行</span>
行分组<span class="token punctuation">.</span>rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 获取当前行分组中的第 i 行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>单元格操作</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> td <span class="token operator">=</span> tr<span class="token punctuation">.</span><span class="token function">insertCell</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 问题：只能创建 td ，不能创建 th</span>
<span class="token comment">// 固定用法</span>
tr<span class="token punctuation">.</span><span class="token function">insertCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在行末尾追加新单元格</span>

<span class="token comment">// 删除单元格</span>
tr<span class="token punctuation">.</span><span class="token function">deleteCell</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取单元格</span>
tr<span class="token punctuation">.</span>cells<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="form-对象"><a href="#form-对象" class="header-anchor">#</a> Form 对象</h3> <p>Form 对象代表页面上的一个表单元素。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020年6月18日星期四 14:37</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/base/Promise.html" class="prev">
        JavaScript 基础之 Promise
      </a></span> <span class="next"><a href="/js/base/Event.html">
        JavaScript 基础之事件
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.cccdeae1.js" defer></script><script src="/assets/js/12.4923b265.js" defer></script><script src="/assets/js/2.87a009b8.js" defer></script><script src="/assets/js/51.df0107c7.js" defer></script><script src="/assets/js/13.8e94c197.js" defer></script>
  </body>
</html>

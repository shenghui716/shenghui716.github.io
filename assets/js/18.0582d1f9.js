(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{482:function(t,s,a){t.exports=a.p+"assets/img/javascript-event-capture-and-bubble.bf430c89.png"},538:function(t,s,a){"use strict";a.r(s);var n=a(29),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"javascript-基础之事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javascript-基础之事件"}},[t._v("#")]),t._v(" JavaScript 基础之事件")]),t._v(" "),n("p",[t._v("给当前元素的某个事件绑定方法，当行为事件触发时，浏览器会自动创建一个保存事件信息和API的对象，作为实参传递给绑定的方法，这个实参就是事件对象，根据操作的不同，事件对象又分为MouseEvent（鼠标事件对象）、KeyboardEvent（键盘事件对象）和Event（普通事件对象）等等。")]),t._v(" "),n("p",[t._v("事件对象中记录了很多属性名和属性值，这些信息中包含了当前操作的基本信息，例如：鼠标点击位置的X/Y轴坐标、事件源（鼠标点击的是谁）等信息。")]),t._v(" "),n("p",[t._v("[MouseEvent]\n"),n("code",[t._v("e.target")]),t._v("：事件源（操作的是哪个元素）")]),t._v(" "),n("p",[n("code",[t._v("e.screenX")]),t._v(" / "),n("code",[t._v("e.screenY")]),t._v("：当前鼠标触发点距离显示屏左上角的X/Y轴坐标")]),t._v(" "),n("p",[n("code",[t._v("e.clientX")]),t._v(" / "),n("code",[t._v("e.clientY")]),t._v(" ：当前鼠标触发点距离当前窗口左上角的X/Y轴坐标")]),t._v(" "),n("p",[n("code",[t._v("e.offsetX")]),t._v(" / "),n("code",[t._v("e.offsetY")]),t._v("：当前鼠标触发点距离当前元素左上角的X/Y轴坐标")]),t._v(" "),n("p",[n("code",[t._v("ev.pageX")]),t._v(" / "),n("code",[t._v("ev.pageY")]),t._v("：当前鼠标触发点距离BODY(第一屏幕)左上角的X/Y轴坐标（低版本浏览器IE6~8的事件对象中不存在）")]),t._v(" "),n("p",[n("code",[t._v("ev.preventDefault()")]),t._v("：阻止默认行为")]),t._v(" "),n("p",[n("code",[t._v("ev.stopPropagation()")]),t._v("：阻止事件的冒泡传播")]),t._v(" "),n("p",[n("code",[t._v("ev.type")]),t._v("：当前事件类型")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("//[KeyboardEvent]\n// ev.code：当前按键'keyE'\n// ev.key：当前按键'e'\n// ev.which / ev.keyCode：当前按键的键盘码 69\n// let code = ev.which || ev.keyCode;\n\n//=>常用的键盘码\n/*\n * 左-上-右-下：37-38-39-40\n * Backspace：8\n * Enter：13\n * Space：32\n * Delete：46\n *\n * Shift：16\n * Alt：18\n * Ctrl：17\n * ESC：27\n *\n * F1~F12：112 ~ 123\n * 48~57：数字键\n * 65~90：小写字母\n */\n")])])]),n("p",[t._v("阻止默认行为")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("tempInp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onkeydown")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ev")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ev "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ev "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>TRIM去除字符串首位空格(不兼容) this.value=this.value.replace(/^ +| +$/g,'')")]),t._v("\n        len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" val"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//=>阻止默认行为去除特殊按键（DELETE\\BACK-SPACE\\方向键...）")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" code "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("which "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" ev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keyCode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/^(46|8|37|38|39|40)$/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            ev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("preventDefault "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" ev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("returnValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[t._v("事件的传播机制")]),t._v(" "),n("ul",[n("li",[t._v("冒泡传播：触发当前元素的某一个事件（点击事件）行为，不仅当前元素事件行为触发，而且其祖先元素的相关事件行为也会依次被触发，这种机制就是“事件的冒泡传播机制”")])]),t._v(" "),n("p",[t._v("事件传播经历的阶段：")]),t._v(" "),n("ul",[n("li",[t._v("捕获阶段：由外向内（按照HTML层级结构）依次查找并记录各级父元素，目的是构建出冒泡传播阶段需要传播的路线。")]),t._v(" "),n("li",[t._v("目标阶段：优先触发事件源上的相关事件行为（如果绑定了事件方法，则把方法执行）。")]),t._v(" "),n("li",[t._v("冒泡阶段：按照捕获阶段记录的路线，由内向外依次触发当前事件源的各级父元素上的相关事件行为。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(482),alt:"javascript-event-capture-and-bubble"}})]),t._v(" "),n("p",[t._v("事件绑定")]),t._v(" "),n("ul",[n("li",[t._v("DOM0\n"),n("ul",[n("li",[n("code",[t._v("box.onclick=function(){}")])]),t._v(" "),n("li",[t._v("这些方法都是在当前元素事件行为的冒泡阶段(或者目标阶段)执行的")]),t._v(" "),n("li",[t._v("每一个元素对象都是对应类的实例，浏览器天生为其设置了很多私有属性和公有的属性方法，而onclick就是其中的一个私有属性（事件类私有属性，还有很多其它的事件私有属性），这些属性默认值是null")]),t._v(" "),n("li",[t._v("DOM0事件绑定的原理：就是给元素的某一个事件私有属性赋值（浏览器会建立监听机制，当我们触发元素的某个行为，浏览器会自己把属性中赋的值去执行）。只允许给当前元素的某个事件行为绑定一个方法，多次绑定，后面绑定的内容会替换前面绑定的，以最后一次绑定的方法为主")])])]),t._v(" "),n("li",[t._v("DOM2\n"),n("ul",[n("li",[n("code",[t._v("box.addEventListener('click',function(){},false)")])]),t._v(" "),n("li",[t._v("第三个参数设置为"),n("code",[t._v("true")]),t._v("和"),n("code",[t._v("false")]),t._v("的区别在于：\n"),n("ul",[n("li",[n("code",[t._v("true")]),t._v("表示该元素在事件的“捕获阶段”（由外往内传递时）响应事件（项目中几乎不用）")]),t._v(" "),n("li",[n("code",[t._v("false")]),t._v("表示该元素在事件的“冒泡阶段”（由内向外传递时）响应事件")])])])])])]),t._v(" "),n("p",[t._v("DOM2 基于 addEventListener 完成事件绑定，是基于“事件池机制”完成的，当我们触发box的click行为后，浏览器会到事件池中“按照顺序（存放增加的顺序）”依次把之前监听的方法执行。")]),t._v(" "),n("p",[t._v("每一个被执行的方法，浏览器都会把事件对象传递给它；")]),t._v(" "),n("p",[t._v("方法中的this是当前操作的元素；")]),t._v(" "),n("p",[t._v("执行的方法不会出现重复（在向事件池中增加的时候就去重了）。")])])}),[],!1,null,null,null);s.default=e.exports}}]);